<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rutina Híbrida - Luis Garcia</title>
    
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.3/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <style>
        :root {
            --bg-body: #050505;
            --bg-card: #121212;
            --accent: #3498db;
            --text-muted: #a0a0a0;
        }

        body { background-color: var(--bg-body); color: #fff; font-family: sans-serif; min-height: 100vh; display: flex; flex-direction: column; padding-top: 70px; }

        /* NAVBAR PRINCIPAL */
        .main-navbar {
            background: rgba(5, 5, 5, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            height: 60px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }
        .brand-logo { font-weight: 800; letter-spacing: 1px; color: white; text-transform: uppercase; font-size: 1.1rem; }
        .brand-icon { color: var(--accent); margin-right: 8px; }

        /* NAV WALL (Selector de Días) */
        .nav-wall {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 15px;
            margin-bottom: 30px;
            overflow-x: auto;
            white-space: nowrap;
        }
        .nav-pills .nav-link { 
            color: var(--text-muted); border-radius: 10px; padding: 8px 20px; 
            margin-right: 10px; background: rgba(0,0,0,0.3); transition: 0.3s; font-size: 0.9rem;
            cursor: pointer;
        }
        .nav-pills .nav-link:hover { background: rgba(255,255,255,0.1); color: white; }
        .nav-pills .nav-link.active { 
            background: var(--accent); color: white; font-weight: bold; 
            box-shadow: 0 0 15px rgba(52, 152, 219, 0.4); 
        }

        /* TARJETA */
        .workout-card {
            background-color: var(--bg-card);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid #252525;
            position: relative;
            margin-bottom: 25px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            transition: transform 0.2s;
        }
        .workout-card:hover { transform: translateY(-3px); border-color: #444; }

        .img-area { position: relative; height: 220px; cursor: pointer; overflow: hidden; }
        .img-area img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s; opacity: 0.85; }
        .img-area:hover img { transform: scale(1.05); opacity: 1; }

        /* BADGES */
        .badge-glass {
            position: absolute; z-index: 10;
            background: rgba(0, 0, 0, 0.8); /* Fondo más oscuro para legibilidad */
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 8px; padding: 5px 10px;
        }
        .badge-tier { top: 10px; right: 10px; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: 900; }
        
        .text-tier-S { color: #ffd700; text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
        .text-tier-A { color: #3498db; text-shadow: 0 0 10px rgba(52, 152, 219, 0.5); }
        .text-tier-C { color: #e67e22; } 
        .text-tier-W { color: #9b59b6; } /* Color Warmup */

        .badge-diff { bottom: 10px; left: 10px; display: flex; gap: 5px; align-items: center;}
        .diff-1 { color: #2ecc71; } .diff-2 { color: #f39c12; } .diff-3 { color: #e74c3c; filter: drop-shadow(0 0 3px #e74c3c); } .diff-off { color: #444; }

        /* DATOS */
        .info-area { padding: 15px; }
        .grid-stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; margin: 15px 0; }
        .stat-box { background: rgba(255,255,255,0.03); border-radius: 8px; padding: 8px 2px; text-align: center; cursor: help; transition: 0.2s; }
        .stat-box:hover { background: rgba(255,255,255,0.08); }
        
        .stat-val { display: block; font-weight: bold; color: var(--accent); font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .stat-label { font-size: 0.6rem; color: #888; text-transform: uppercase; }

        .btn-toggle { width: 100%; background: transparent; border: 1px dashed #444; color: #aaa; padding: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; font-size: 0.85rem; cursor: pointer;}
        .btn-toggle:hover { background: rgba(255,255,255,0.05); color: white; border-color: #666; }

        /* FOOTER & MODAL */
        footer { margin-top: auto; padding: 30px; background: #000; border-top: 1px solid #222; text-align: center; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10000; display: flex; align-items: center; justify-content: center; }
        .modal-img { max-width: 95%; max-height: 80vh; border-radius: 10px; }

        /* Tooltip Custom Style */
        .tooltip-inner { background-color: var(--accent); color: white; font-weight: bold; }
        .tooltip.bs-tooltip-top .tooltip-arrow::before { border-top-color: var(--accent); }
    </style>
</head>

<body>

    <nav class="navbar fixed-top main-navbar">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <i class="bi bi-activity brand-icon"></i>
                <span class="brand-logo">Luis Garcia Training</span>
            </a>
            <div class="d-flex">
                <i class="fas fa-user-circle text-white fs-4"></i>
            </div>
        </div>
    </nav>

    <div x-data="appCore()" x-init="initApp()">

        <div class="container mt-4">
            
            <div class="mb-4 text-center text-md-start">
                <small class="text-muted text-uppercase fw-bold">Programa 2026</small>
                <h2 class="fw-bold text-white">Rutina Híbrida Semanal</h2>
            </div>

            <div class="nav-wall animate__animated animate__fadeInDown">
                <div class="nav nav-pills d-flex flex-nowrap">
                    <template x-for="day in uniqueDays" :key="day">
                        <button class="nav-link" 
                                :class="activeTab === day ? 'active' : ''"
                                @click="setActiveTab(day)"
                                x-text="day">
                        </button>
                    </template>
                </div>
            </div>

            <div class="row">
                <template x-for="(ex, index) in filteredExercises" :key="ex.toonId || index">
                    <div class="col-12 col-md-6 col-lg-4 animate__animated animate__fadeInUp"
                         :style="`animation-delay: ${index * 100}ms`">
                        
                        <div class="workout-card" x-data="{ open: false }">
                            
                            <div class="img-area" @click="openModal(ex.image_url)">
                                <div class="badge-glass badge-tier">
                                    <span :class="`text-tier-${ex.tier}`" x-text="ex.tier"></span>
                                </div>
                                <div class="badge-glass badge-diff" 
                                     data-bs-toggle="tooltip" 
                                     data-bs-placement="top" 
                                     title="Nivel de Dificultad">
                                    <template x-for="i in 3">
                                        <i class="fas fa-dumbbell icon-dumbbell"
                                           :class="i <= ex.difficulty ? `diff-${ex.difficulty}` : 'diff-off'">
                                        </i>
                                    </template>
                                </div>
                                <img :src="ex.image_url" alt="Ejercicio">
                            </div>

                            <div class="info-area">
                                <h5 class="fw-bold mb-0 text-white" x-text="ex.exercise_name"></h5>
                                <small class="text-muted" x-text="`${ex.category} | ID: ${ex.toon_id}`"></small>

                                <div class="grid-stats">
                                    <div class="stat-box" data-bs-toggle="tooltip" title="Peso / Carga Estimada">
                                        <i class="fas fa-weight-hanging mb-1 text-secondary"></i>
                                        <span class="stat-val" x-text="ex.weight"></span>
                                        <span class="stat-label">Peso</span>
                                    </div>
                                    <div class="stat-box" data-bs-toggle="tooltip" title="Series Efectivas">
                                        <i class="fas fa-list-ol mb-1 text-secondary"></i>
                                        <span class="stat-val" x-text="ex.sets"></span>
                                        <span class="stat-label">Series</span>
                                    </div>
                                    <div class="stat-box" data-bs-toggle="tooltip" title="Repeticiones Objetivo">
                                        <i class="fas fa-redo mb-1 text-secondary"></i>
                                        <span class="stat-val" x-text="ex.reps"></span>
                                        <span class="stat-label">Reps</span>
                                    </div>
                                    <div class="stat-box" data-bs-toggle="tooltip" data-bs-html="true" 
                                         title="TEMPO:<br>Bajada - Pausa - Subida">
                                        <i class="fas fa-stopwatch mb-1 text-secondary"></i>
                                        <span class="stat-val" x-text="ex.tempo"></span>
                                        <span class="stat-label">Tempo</span>
                                    </div>
                                </div>

                                <button class="btn-toggle" @click="open = !open">
                                    <span x-text="open ? 'Ocultar Detalles' : 'Ver Instrucciones'"></span>
                                    <i class="fas" :class="open ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
                                </button>

                                <div x-show="open" x-collapse class="mt-3 text-secondary small border-top border-secondary pt-2">
                                    <p class="mb-1"><strong class="text-white">Posición:</strong> <span x-text="ex.bench_position"></span></p>
                                    <p class="mb-2"><strong class="text-white">Músculos:</strong> <span x-text="ex.muscles"></span></p>
                                    <a :href="ex.page_url" target="_blank" class="btn btn-sm btn-outline-light w-100 rounded-pill opacity-75">
                                        <i class="fas fa-external-link-alt me-2"></i>Guía Web
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </div>

        <footer>
            <div class="container animate__animated animate__fadeIn">
                <i class="bi bi-mortarboard-fill fs-3 text-white mb-3 d-inline-block"></i>
                <p class="mb-0 fw-bold text-white">Luis Garcia 2026</p>
                <small class="text-muted">Material Educativo - Ingeniería de Sistemas & Biomecánica</small>
            </div>
        </footer>

        <div class="modal-overlay" x-show="modalOpen" x-transition.opacity style="display:none" @click.self="closeModal()">
            <div class="position-relative">
                <i class="fas fa-times text-white fs-2 position-absolute top-0 end-0 m-3" style="cursor:pointer; z-index:10000; filter:drop-shadow(0 0 5px black)" @click="closeModal()"></i>
                <img :src="currentImage" class="modal-img">
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        const WORKOUT_DATA = [
            // === 1. PRE-WORKOUT (CALENTAMIENTO) ===
            {
                "week_day": "PRE-WORKOUT",
                "tier": "W", // W = Warmup
                "difficulty": 1,
                "exercise_name": "Movilidad Articular",
                "toon_id": "050",
                "category": "Warm Up",
                "weight": "Corp.",
                "sets": "1",
                "reps": "20",
                "tempo": "Fluido",
                "bench_position": "De pie",
                "muscles": "Hombros, Cadera, Muñecas",
                "image_url": "https://fitcron.com/wp-content/uploads/2024/02/calentamiento.jpg", // Imagen genérica o la que uses
                "page_url": "#"
            },
            {
                "week_day": "PRE-WORKOUT",
                "tier": "W",
                "difficulty": 1,
                "exercise_name": "Gato - Vaca",
                "toon_id": "051",
                "category": "Activación",
                "weight": "Corp.",
                "sets": "2",
                "reps": "10",
                "tempo": "3-3-3",
                "bench_position": "Cuadrupedia",
                "muscles": "Columna Vertebral",
                "image_url": "https://fitcron.com/wp-content/uploads/2024/02/estiramiento.jpg",
                "page_url": "#"
            },

            // === 2. LUNES (RUTINA COMPLETA) ===
            {
                "week_day": "LUNES", "tier": "S", "difficulty": 3,
                "exercise_name": "Dominadas", "toon_id": "406", "category": "Espalda",
                "weight": "Corp.", "sets": "4", "reps": "Fallo", "tempo": "2-0-1",
                "bench_position": "Barra Fija (Agarre Prono)", "muscles": "Dorsal,Trapecio,Bíceps",
                "image_url": "https://fitcron.com/wp-content/uploads/2021/04/14291301-Wide-Grip-Pull-Up_Back_720.gif",
                "page_url": "https://fitcron.com/exercise/dominada-dorsal/"
            },
            {
                "week_day": "LUNES", "tier": "A", "difficulty": 2,
                "exercise_name": "Fondos (Dips)", "toon_id": "598", "category": "Tríceps",
                "weight": "Corp.", "sets": "3", "reps": "Fallo", "tempo": "3-1-1",
                "bench_position": "Banco (Codos atrás) / Barras", "muscles": "Tríceps,Antebrazo",
                "image_url": "https://fitcron.com/wp-content/uploads/2021/03/08141301-Triceps-Dip_Upper-Arms_720.gif",
                "page_url": "https://fitcron.com/exercise/fondos-cerrados-en-paralelas-triceps/"
            },
            {
                "week_day": "LUNES", "tier": "S", "difficulty": 3,
                "exercise_name": "Press Militar", "toon_id": "374", "category": "Hombro",
                "weight": "11 kg", "sets": "4", "reps": "10", "tempo": "3-0-1",
                "bench_position": "De Pie (Core contraído)", "muscles": "Trapecio,Deltoides",
                "image_url": "https://fitcron.com/wp-content/uploads/2021/04/11651301-Barbell-Standing-Military-Press-without-rack_Shoulders_720.gif",
                "page_url": "https://fitcron.com/exercise/press-militar-con-barra-deltoides/"
            },
            {
                "week_day": "LUNES", "tier": "A", "difficulty": 2,
                "exercise_name": "Press Inclinado", "toon_id": "605", "category": "Pecho",
                "weight": "11 kg", "sets": "3", "reps": "12", "tempo": "3-1-1",
                "bench_position": "Banco a 45°", "muscles": "Pectoral,Tríceps",
                "image_url": "https://fitcron.com/wp-content/uploads/2021/03/03241301-Dumbbell-Incline-Palm-in-Press_Chest_720.gif",
                "page_url": "https://fitcron.com/exercise/press-inclinado-en-supinacion-con-mancuernas-pectoral/"
            },
            {
                "week_day": "LUNES", "tier": "S", "difficulty": 2,
                "exercise_name": "Remo en T", "toon_id": "424", "category": "Espalda",
                "weight": "11 kg", "sets": "4", "reps": "12", "tempo": "2-1-1",
                "bench_position": "Banco a 45° (Boca abajo)", "muscles": "Dorsal,Trapecio,Bíceps",
                "image_url": "https://fitcron.com/wp-content/uploads/2021/04/03271301-Dumbbell-Incline-Row_Back_720.gif",
                "page_url": "https://fitcron.com/exercise/remo-inclinado-en-pronacion-con-mancuernas-dorsal/"
            },
            {
                "week_day": "LUNES", "tier": "C", "difficulty": 3,
                "exercise_name": "Cardio Final", "toon_id": "NA", "category": "Cardio",
                "weight": "-", "sets": "1", "reps": "15 min", "tempo": "Continuo",
                "bench_position": "Cuerda + Saltos Payaso", "muscles": "Todo el cuerpo",
                "image_url": "https://fitcron.com/wp-content/uploads/2021/03/26121301-Jump-Rope-male_Cardio_720.gif",
                "page_url": "https://fitcron.com/exercise/cardio-combinado/"
            }
        ];

        function appCore() {
            return {
                data: WORKOUT_DATA,
                activeTab: '', // Se calculará en initApp
                modalOpen: false,
                currentImage: '',
                tooltips: [],

                // Inicialización
                initApp() {
                    // Seleccionar el primer día disponible automáticamente (PRE-WORKOUT)
                    if (this.uniqueDays.length > 0) {
                        this.activeTab = this.uniqueDays[0];
                    }
                    this.refreshTooltips();
                },

                // Cambio de pestaña
                setActiveTab(day) {
                    this.activeTab = day;
                    this.refreshTooltips();
                },

                // Getters
                get uniqueDays() { return [...new Set(this.data.map(item => item.week_day))]; },
                get filteredExercises() { return this.data.filter(item => item.week_day === this.activeTab); },

                // Modal
                openModal(url) { this.currentImage = url; this.modalOpen = true; },
                closeModal() { this.modalOpen = false; },

                // Tooltips de Bootstrap
                refreshTooltips() {
                    // Limpiar tooltips viejos
                    if(this.tooltips) this.tooltips.forEach(t => t.dispose());
                    
                    // Esperar renderizado y reactivar
                    this.$nextTick(() => {
                        const els = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
                        this.tooltips = els.map(el => new bootstrap.Tooltip(el));
                    });
                }
            }
        }
    </script>
</body>
</html>
