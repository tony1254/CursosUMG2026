<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Día 3: Lógica Formal y Estructura del Lenguaje</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Montserrat:wght@600;700&family=Fira+Code:wght@500&display=swap" rel="stylesheet">

    <style>
        :root {
            /* Paleta Académica (Estilo Día 2) */
            --primary-color: #2c3e50; /* Dark Slate Blue */
            --accent-color: #4834d4;  /* Indigo */
            --accent-light: #eaddff;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #c0392b;
            --light-bg: #f8f9fa;
            --white: #ffffff;
            --border-radius: 12px;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--light-bg);
            color: #333;
            line-height: 1.8; /* Mejor lectura para textos largos */
            padding-bottom: 100px;
        }

        h1, h2, h3, h4 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
        }

        .font-code {
            font-family: 'Fira Code', monospace;
        }

        /* --- Títulos de Sección --- */
        .section-header {
            border-left: 5px solid var(--accent-color);
            padding-left: 1rem;
            margin-bottom: 2rem;
            color: var(--primary-color);
        }

        /* --- Cards Educativas --- */
        .edu-card {
            background: var(--white);
            border: 1px solid rgba(0,0,0,0.08);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px rgba(0,0,0,0.02);
            height: 100%;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .edu-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.08);
        }
        .edu-card-header {
            background-color: rgba(72, 52, 212, 0.05);
            padding: 1.25rem;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            font-weight: bold;
            color: var(--accent-color);
        }

        /* --- Árbol Binario (CSS Puro para Estructura) --- */
        .tree-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
            background-color: white;
            border-radius: var(--border-radius);
            border: 1px solid #e0e0e0;
            overflow-x: auto;
        }
        
        .tree-level {
            display: flex;
            justify-content: center;
            position: relative;
            margin-bottom: 40px;
        }
        
        .node-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 15px;
            position: relative;
        }

        .tree-node {
            width: 45px; height: 45px;
            border-radius: 50%;
            background: white;
            border: 2px solid var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-family: 'Fira Code', monospace;
            z-index: 2;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .tree-node.op-main { border-color: var(--danger-color); color: var(--danger-color); box-shadow: 0 0 10px rgba(192, 57, 43, 0.2); }
        .tree-node.op-sub { border-color: var(--accent-color); color: var(--accent-color); }
        .tree-node.leaf { border-color: var(--success-color); background-color: #f0fff4; color: var(--success-color); }

        .tree-node:hover {
            transform: scale(1.2);
            background-color: var(--primary-color);
            color: white !important;
        }

        /* Líneas conectoras simples (Visual only) */
        .connector-vertical {
            width: 2px; height: 40px; background: #ccc; position: absolute; top: 20px; z-index: 0;
        }
        
        /* --- Terminal / Consola --- */
        .terminal-window {
            background-color: #2d3436;
            border-radius: 8px;
            padding: 0;
            overflow: hidden;
            font-family: 'Fira Code', monospace;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .terminal-header {
            background: #dfe6e9;
            padding: 5px 15px;
            display: flex;
            gap: 5px;
        }
        .dot { width: 10px; height: 10px; border-radius: 50%; background: #b2bec3; }
        .dot.red { background: #ff7675; }
        .dot.yellow { background: #ffeaa7; }
        .dot.green { background: #55efc4; }
        
        .terminal-body {
            padding: 20px;
            color: #bdc3c7;
            min-height: 250px;
        }
        .cmd-text { color: var(--warning-color); }
        .output-text { color: #fff; display: block; margin-bottom: 5px; }

        /* --- Definiciones (Alerts mejorados) --- */
        .definition-box {
            border-left: 4px solid var(--accent-color);
            background: #fff;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-radius: 0 8px 8px 0;
        }
    </style>
</head>
<body>

    <header class="bg-white shadow-sm pt-5 pb-4 mb-5 border-bottom">
        <div class="container text-center">
            <div class="d-inline-block p-3 rounded-circle bg-light text-primary mb-3 shadow-sm">
                <i class="bi bi-diagram-3-fill fs-2"></i>
            </div>
            <h1 class="display-5 fw-bold text-dark">Lógica Formal y Estructura</h1>
            <h2 class="h6 text-muted text-uppercase letter-spacing-2 mt-2">Día 3: De la Intuición al Lenguaje Formal</h2>
            <p class="lead mt-3 mx-auto text-secondary" style="max-width: 800px;">
                Hoy formalizamos el conocimiento. Abandonamos la ambigüedad del lenguaje natural para adoptar un sistema preciso de <strong>sintaxis, semántica y jerarquías</strong>, idéntico al que usan los compiladores y la Inteligencia Artificial.
            </p>
        </div>
    </header>

    <div class="container">

        <section class="mb-5">
            <h3 class="section-header">1. Transición a la Lógica Formal</h3>
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <p>Hasta ahora hemos trabajado con conceptos intuitivos como <em>premisas</em> e <em>inferencias</em>. A partir de hoy, trataremos la lógica como un <strong>Lenguaje de Programación</strong>.</p>
                    <div class="definition-box">
                        <h5 class="fw-bold text-primary">Objetivo de la Formalización</h5>
                        <p class="mb-0 small">Eliminar cualquier ambigüedad. En el lenguaje natural, una frase puede tener doble sentido. En el lenguaje formal, una expresión tiene una <strong>única</strong> interpretación estructural (Sintaxis) y un <strong>único</strong> valor de verdad (Semántica).</p>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="card bg-dark text-white p-4">
                        <h5 class="border-bottom border-secondary pb-2 mb-3"><i class="bi bi-arrow-right-circle me-2"></i>Evolución del Curso</h5>
                        <ul class="list-unstyled font-code">
                            <li class="mb-2 text-white-50">Día 1-2: Intuición, Argumentos, Silogismos (Lenguaje Natural).</li>
                            <li class="mb-2 text-warning"><i class="bi bi-caret-right-fill"></i> Día 3: Alfabeto, Árboles, Sintaxis (Lenguaje Formal).</li>
                            <li class="mb-2 text-white-50">Día 4+: Tablas de Verdad, Evaluación (Cálculo).</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-5">
            <h3 class="section-header">2. El Alfabeto Proposicional ($\Sigma$)</h3>
            <p class="mb-4">Un lenguaje formal comienza definiendo sus "piezas" válidas. En Lógica Proposicional, estas piezas se clasifican estrictamente.</p>

            <div class="row g-4">
                <div class="col-md-4">
                    <div class="edu-card">
                        <div class="edu-card-header"><i class="bi bi-alphabet me-2"></i>8.1 Variables Proposicionales ($V_P$)</div>
                        <div class="p-4">
                            <p class="small text-muted">Son símbolos que representan afirmaciones básicas indivisibles. Es un conjunto infinito.</p>
                            <div class="alert alert-light border font-code text-center">
                                p, q, r, s... <br>
                                p<sub>0</sub>, p<sub>1</sub>, q<sub>0</sub>...
                            </div>
                            <p class="small mb-0">Cada variable puede asumir un estado: <strong>Verdadero</strong> o <strong>Falso</strong>.</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="edu-card">
                        <div class="edu-card-header"><i class="bi bi-bezier2 me-2"></i>8.2 Conectivos (Por Aridad)</div>
                        <div class="p-4">
                            <p class="small text-muted">Se clasifican según cuántos operandos necesitan (su aridad).</p>
                            
                            <h6 class="fw-bold text-danger mt-3">Aridad Unaria (1)</h6>
                            <ul class="list-unstyled small font-code ms-2">
                                <li>¬ (Negación) <span class="text-muted">-> Opera sobre 1 var.</span></li>
                            </ul>

                            <h6 class="fw-bold text-primary mt-3">Aridad Binaria (2)</h6>
                            <ul class="list-unstyled small font-code ms-2">
                                <li>∧ (Conjunción)</li>
                                <li>∨ (Disyunción)</li>
                                <li>→ (Condicional)</li>
                                <li>↔ (Bicondicional)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="edu-card">
                        <div class="edu-card-header"><i class="bi bi-brackets me-2"></i>8.3 Símbolos Auxiliares</div>
                        <div class="p-4">
                            <p class="small text-muted">Signos de puntuación que no tienen valor de verdad, pero definen la estructura.</p>
                            <div class="text-center display-6 font-code my-3">( )</div>
                            <p class="small mb-0"><strong>Función:</strong> Agrupar y establecer prioridad de evaluación para evitar ambigüedades.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-5">
            <h3 class="section-header">3. Jerarquía y Estructura (Implícito vs Explícito)</h3>
            
            <div class="row">
                <div class="col-lg-5">
                    <div class="card border-0 shadow-sm mb-4">
                        <div class="card-body">
                            <h5 class="card-title fw-bold text-primary">Reglas de Prioridad</h5>
                            <p class="card-text small text-muted">Igual que en matemáticas ($3 + 5 \times 2$), existe un orden estricto si no hay paréntesis.</p>
                            <table class="table table-sm table-hover font-code small">
                                <thead class="table-light">
                                    <tr><th>Orden</th><th>Símbolo</th><th>Nombre</th></tr>
                                </thead>
                                <tbody>
                                    <tr class="table-warning"><td>1 (Máx)</td><td>( )</td><td>Paréntesis</td></tr>
                                    <tr><td>2</td><td>¬</td><td>Negación</td></tr>
                                    <tr><td>3</td><td>∧</td><td>Conjunción</td></tr>
                                    <tr><td>4</td><td>∨</td><td>Disyunción</td></tr>
                                    <tr><td>5</td><td>→</td><td>Condicional</td></tr>
                                    <tr><td>6 (Mín)</td><td>↔</td><td>Bicondicional</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="col-lg-7">
                    <div class="definition-box bg-light">
                        <h5 class="fw-bold"><i class="bi bi-eye-slash-fill me-2"></i>Implícito vs. Explícito</h5>
                        <p class="small">
                            <strong>Explícito:</strong> Lo que está escrito. <br>
                            <strong>Implícito:</strong> Lo que se deduce por las reglas de jerarquía.
                        </p>
                        
                        <div class="card mt-3">
                            <div class="card-header bg-white fw-bold">Ejemplo Interactivo</div>
                            <div class="card-body text-center">
                                <p class="mb-1 text-muted small">Expresión sin paréntesis (Implícita):</p>
                                <h4 class="font-code mb-3">¬p ∨ q ∧ r</h4>
                                
                                <button class="btn btn-outline-primary btn-sm mb-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample">
                                    <i class="bi bi-magic me-2"></i> Revelar Estructura Real
                                </button>
                                
                                <div class="collapse" id="collapseExample">
                                    <div class="alert alert-primary font-code fw-bold">
                                        (¬p) ∨ (q ∧ r)
                                    </div>
                                    <p class="small text-start text-muted mt-2">
                                        <strong>Explicación:</strong> <br>
                                        1. La negación (¬) es más fuerte, se une a 'p'.<br>
                                        2. La conjunción (∧) es más fuerte que (∨), une 'q' y 'r'.<br>
                                        3. Finalmente, la disyunción (∨) une los dos bloques.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-5">
            <h3 class="section-header">4. Árboles de Formación</h3>
            <p>Cada expresión lógica es, en realidad, un grafo (árbol binario). Las hojas son las proposiciones simples y la raíz es la fórmula completa.</p>
            
            <div class="card mb-4 border-0 shadow-sm">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <h5 class="fw-bold text-primary">Análisis Bidireccional</h5>
                            <ul class="list-unstyled small">
                                <li class="mb-3">
                                    <strong><i class="bi bi-arrow-up-circle text-success me-2"></i>De Abajo hacia Arriba (Construcción):</strong> 
                                    Cómo se forma la fórmula uniendo piezas pequeñas.
                                </li>
                                <li>
                                    <strong><i class="bi bi-arrow-down-circle text-danger me-2"></i>De Arriba hacia Abajo (Descomposición):</strong> 
                                    Cómo analizamos sus subfórmulas (útil para tablas de verdad).
                                </li>
                            </ul>
                            <hr>
                            <p class="small text-muted">Fórmula Compleja a graficar:</p>
                            <div class="alert alert-secondary font-code p-2 text-center small">
                                ¬(¬(p ∨ q) → (¬r ∧ s))
                            </div>
                        </div>

                        <div class="col-md-8 bg-light rounded d-flex justify-content-center align-items-center p-4">
                            <div class="tree-container shadow-sm w-100">
                                <div class="tree-level">
                                    <div class="node-wrapper">
                                        <div class="tree-node op-main" data-bs-toggle="tooltip" title="Negación Principal">¬</div>
                                        <small class="text-muted mt-1 fw-bold">RAÍZ</small>
                                    </div>
                                </div>
                                
                                <div class="tree-level">
                                    <div class="connector-vertical" style="height: 30px; top: -30px;"></div>
                                    <div class="node-wrapper">
                                        <div class="tree-node op-sub" data-bs-toggle="tooltip" title="Condicional">→</div>
                                    </div>
                                </div>

                                <div class="tree-level gap-5">
                                    <div class="node-wrapper me-5">
                                        <div class="tree-node op-sub">¬</div>
                                        <div style="position: absolute; top:-35px; right: -40px; width: 60px; height: 2px; background:#ccc; transform: rotate(30deg);"></div>
                                    </div>
                                    <div class="node-wrapper ms-5">
                                        <div class="tree-node op-sub">∧</div>
                                        <div style="position: absolute; top:-35px; left: -40px; width: 60px; height: 2px; background:#ccc; transform: rotate(-30deg);"></div>
                                    </div>
                                </div>

                                <div class="tree-level gap-5">
                                    <div class="node-wrapper me-5">
                                        <div class="tree-node op-sub">∨</div>
                                        <div style="position: absolute; top:-35px; left: 5px; width: 2px; height: 35px; background:#ccc;"></div>
                                    </div>
                                    <div class="d-flex ms-5 gap-3">
                                        <div class="node-wrapper">
                                            <div class="tree-node op-sub">¬</div>
                                        </div>
                                        <div class="node-wrapper">
                                            <div class="tree-node leaf">s</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="tree-level gap-4">
                                    <div class="d-flex me-5 pe-5 gap-3">
                                        <div class="tree-node leaf">p</div>
                                        <div class="tree-node leaf">q</div>
                                    </div>
                                    <div class="d-flex ms-5 ps-4">
                                        <div class="tree-node leaf">r</div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-5">
            <h3 class="section-header">5. Lógica y Lenguajes de Programación</h3>
            <p>Todo lenguaje formal (C++, Python, Lógica Proposicional) pasa por 3 fases de análisis. Comprender esto es vital para la computación.</p>

            <div class="row">
                <div class="col-lg-5">
                    <div class="accordion shadow-sm" id="accordionCompiler">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button fw-bold text-primary" type="button" data-bs-toggle="collapse" data-bs-target="#lexico">
                                    1. Análisis Léxico (Scanner)
                                </button>
                            </h2>
                            <div id="lexico" class="accordion-collapse collapse show" data-bs-parent="#accordionCompiler">
                                <div class="accordion-body small">
                                    <p>Divide la cadena de texto en <strong>Tokens</strong> (símbolos significativos).</p>
                                    <div class="alert alert-secondary p-2">
                                        <strong>Herramienta:</strong> Expresiones Regulares (Regex).<br>
                                        <strong>Input:</strong> "p ∧ q"<br>
                                        <strong>Output:</strong> <code>[VAR:p, OP:AND, VAR:q]</code>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed fw-bold text-warning" type="button" data-bs-toggle="collapse" data-bs-target="#sintactico">
                                    2. Análisis Sintáctico (Parser)
                                </button>
                            </h2>
                            <div id="sintactico" class="accordion-collapse collapse" data-bs-parent="#accordionCompiler">
                                <div class="accordion-body small">
                                    <p>Verifica la <strong>Forma</strong>. ¿Está bien escrita la fórmula? ¿Los paréntesis están balanceados?</p>
                                    <ul>
                                        <li>Usa Gramáticas Libres de Contexto.</li>
                                        <li>Construye el Árbol de Formación.</li>
                                        <li><em>No evalúa si es verdad, solo si es correcto gramaticalmente.</em></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed fw-bold text-success" type="button" data-bs-toggle="collapse" data-bs-target="#semantico">
                                    3. Análisis Semántico (Interpreter)
                                </button>
                            </h2>
                            <div id="semantico" class="accordion-collapse collapse" data-bs-parent="#accordionCompiler">
                                <div class="accordion-body small">
                                    <p>Evalúa el <strong>Significado (Verdad)</strong>.</p>
                                    <p>Determina si la expresión es Verdadera o Falsa basándose en los valores de las variables (Tablas de Verdad).</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-7 mt-3 mt-lg-0">
                    <div class="terminal-window h-100">
                        <div class="terminal-header">
                            <div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div>
                            <span class="ms-2 small text-muted">compiler_simulation.exe</span>
                        </div>
                        <div class="terminal-body" id="consoleOutput">
                            <div class="mb-3">
                                <span class="cmd-text">user@logic:~$</span> ingresar_formula "(p ∧ q) → r"
                            </div>
                            <div id="dynamicOutput"></div>
                            
                            <button class="btn btn-sm btn-outline-light mt-4" onclick="runAnalysis()">
                                <i class="bi bi-play-fill"></i> Ejecutar Análisis Completo
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-5">
            <h3 class="section-header">6. Razonamiento Silogístico Formal (Prolog)</h3>
            <p>Aquí es donde la lógica proposicional se encuentra con la Inteligencia Artificial.</p>

            <div class="row">
                <div class="col-md-12">
                    <div class="edu-card p-4 border-start border-5 border-info">
                        <h5 class="fw-bold text-info mb-3">El Problema Central</h5>
                        <p>
                            Dado un conjunto de asertos verdaderos llamado <strong>Base de Conocimiento (BC)</strong>, y una afirmación nueva <strong>A</strong>:
                            <br><em>¿Es A necesariamente cierta basándonos en BC?</em>
                        </p>
                        
                        <div class="bg-light p-3 rounded font-code mt-3">
                            <span class="text-muted">% Ejemplo en Prolog (Lenguaje Lógico)</span><br>
                            <br>
                            <span class="text-success">% 1. HECHOS (La Base de Conocimiento)</span><br>
                            es_humano(socrates).<br>
                            <br>
                            <span class="text-primary">% 2. REGLAS (Inferencia Lógica)</span><br>
                            es_mortal(X) :- es_humano(X). <span class="text-muted"> // "Si X es humano, entonces X es mortal"</span><br>
                            <br>
                            <span class="text-warning">% 3. CONSULTA (Query)</span><br>
                            ?- es_mortal(socrates).<br>
                            <br>
                            <span class="text-dark fw-bold">Result: true.</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <footer class="bg-white border-top py-5 mt-5">
        <div class="container text-center">
            <p class="text-muted mb-2">Lógica Informática &bull; Diseño Instruccional Avanzado</p>
            <small class="text-secondary">Día 3 finalizado. Próximo paso: <strong>Modelos Semánticos (Tablas de Verdad)</strong>.</small>
        </div>
    </footer>

    <div style="position: fixed; bottom: 30px; right: 30px; z-index: 100;">
        <button class="btn btn-primary rounded-circle shadow p-3" onclick="window.scrollTo(0,0)" title="Volver Arriba">
            <i class="bi bi-arrow-up"></i>
        </button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        function runAnalysis() {
            const out = document.getElementById('dynamicOutput');
            out.innerHTML = ""; // Limpiar
            
            const steps = [
                { text: "> Iniciando Scanner (Análisis Léxico)...", delay: 500, color: "text-white" },
                { text: "> Tokenizando input con Regex...", delay: 1000, color: "text-muted" },
                { text: "  [TOKEN: '('] [TOKEN: 'p'] [TOKEN: '∧'] [TOKEN: 'q'] [TOKEN: ')'] [TOKEN: '→'] [TOKEN: 'r']", delay: 1500, color: "text-info" },
                { text: "> Iniciando Parser (Análisis Sintáctico)...", delay: 2500, color: "text-white" },
                { text: "  Verificando balance de paréntesis... OK", delay: 3000, color: "text-success" },
                { text: "  Construyendo árbol binario... OK", delay: 3500, color: "text-success" },
                { text: "> Iniciando Evaluador Semántico...", delay: 4500, color: "text-white" },
                { text: "  Esperando valores de verdad para p, q, r...", delay: 5000, color: "text-warning" },
                { text: "> PROCESO COMPLETADO. Estructura Válida.", delay: 5500, color: "text-success fw-bold" }
            ];

            steps.forEach(step => {
                setTimeout(() => {
                    out.innerHTML += `<div class="${step.color} font-code mb-1">${step.text}</div>`;
                }, step.delay);
            });
        }

        // Inicializar tooltips
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
          return new bootstrap.Tooltip(tooltipTriggerEl)
        })
    </script>
</body>
</html>
